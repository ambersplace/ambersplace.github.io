"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[3498,8916,3514,2104,9171,1132,5730,125],{70575:function(e,t,r){r.d(t,{H:function(){return n},h:function(){return a}});var l=r(94159);const n=l.createContext({adultFilterMode:"hide",isAdult:!1,categories:new Set,setAdultFilterMode:()=>{},categoryMatch:"any",setCategoryMatch:()=>{},sortOrder:"random",setSortOrder:()=>{}}),a=()=>(0,l.useContext)(n)},26225:function(e,t,r){r.d(t,{l:function(){return x}});var l=r(37111),n=r(76051),a=r(12093),o=r(94159),c=r(98074),s=r(62745),i=r(50196),d=r(46975),u=r(47071),m=r(51540),g=r(70575),p=r(55875),f=r(2403),h=r(96332),E=r(93410),b=r(44144);const y=({attachment:e})=>{const t=(0,s.Q)(),[r,l]=(0,o.useState)(t.gifsStartPaused?e.previewURL:e.fileURL),[n,a]=(0,o.useState)(!t.gifsStartPaused),c=(0,i.T)(r,300,1.2);return o.createElement("div",{className:"group relative"},o.createElement("img",{src:c(1),srcSet:`\n                ${c(1)} 1x,\n                ${c(2)} 2x,\n                ${c(3)} 3x,\n            `,alt:e.altText,className:"co-border aspect-[300/250] w-full border-b object-cover"}),e.previewURL!==e.fileURL&&o.createElement(u.I,{isPlaying:n,showPlay:e.previewURL!==e.fileURL,extraClasses:"absolute bottom-3 right-3 w-12",onPlay:()=>{a(!0),l(e.fileURL)},onPause:()=>{a(!1),l(e.previewURL)}}))},v=({listing:e})=>{const t=(0,o.useContext)(b.j);return o.createElement(p.v,{as:"div",className:"relative h-6"},o.createElement(p.v.Button,{className:"co-action-button cursor-pointer text-sm font-bold hover:underline"},o.createElement(h.Z,{className:"h-6 w-6 transition-transform ui-open:rotate-90"})),o.createElement(p.v.Items,{className:"co-meatball-items absolute right-0 top-8 z-30 flex min-w-max flex-col divide-y rounded-lg p-3  focus:!outline-none"},o.createElement(p.v.Item,null,o.createElement(E.X,{disabled:!1,onClick:()=>{t.send({type:"START_REPORT",artistAlleyListingId:e.id})},ItemIcon:f.Z,text:"report"}))))},x=({listing:e,project:t})=>{const r=(0,o.useMemo)((()=>(0,l.Ml)(e.body,new Date,{disableEmbeds:!0,externalLinksInNewTab:!0,hasCohostPlus:!1,renderingContext:"artistAlley"})),[e.body]),n=(0,c.rA)();return o.createElement("div",{"data-theme":n.current,className:"co-themed-box co-artist-alley-listing flex w-full flex-col rounded-lg border"},o.createElement("div",{className:"co-border flex flex-row items-center gap-2 border-b px-2 py-3"},o.createElement(m.t,{project:t,className:"h-8"}),o.createElement("a",{href:a.ZP.public.project.mainAppProfile({projectHandle:t.handle}).toString()},"@",t.handle),o.createElement("div",{className:"flex-1"}," "),e.adultContent?o.createElement("span",{className:"co-18-plus rounded-lg p-1 text-xs "},"18+"):null,o.createElement(v,{listing:e})),e.attachment&&o.createElement(y,{attachment:e.attachment}),o.createElement("div",{className:"co-prose prose p-2"},r),o.createElement("div",{className:"mx-2 my-3"},o.createElement(d.k,{as:"a",buttonColor:"",buttonSize:"regular",href:e.cta.link,extraClasses:"co-cta-button",target:"_blank"},e.cta.text)),e.categories.length>0&&o.createElement(w,{tags:e.categories}))},w=({tags:e})=>{const{categories:t}=(0,g.h)(),r=e.filter((e=>""!=e));return r.length?o.createElement("div",{className:"w-full max-w-full p-3"},o.createElement("div",{className:n.tw`co-tags relative w-full overflow-y-hidden break-words leading-none`},o.createElement("div",null,r.map((e=>o.createElement("button",{key:e,className:"mr-2 inline-block text-sm hover:underline "+(t.has(e)?"font-bold":""),onClick:()=>{t.has(e)?t.delete(e):t.add(e)}},"#",e)))))):null}},2735:function(e,t,r){r.d(t,{Qj:function(){return k},zx:function(){return j}});var l=r(65443),n=r.n(l),a=r(94159),o=r(6285);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e},c.apply(this,arguments)}const s=o.z.enum(["pill","roundrect","authn"]),i=o.z.enum(["cherry","strawberry","mango","not-black","red","green","accent","secondary","authn-primary","authn-other"]),d=(o.z.object({buttonStyle:s,color:i,className:o.z.string().optional()}),n()("bg-notWhite","hover:text-notWhite")),u=n()("font-atkinson","font-bold","rounded-full","border-2"),m=n()("body-2","rounded-lg"),g=n()("flex","h-12","items-center","justify-center","rounded-lg","px-6","text-lg"),p=n()("border-cherry","hover:bg-cherry","text-cherry","active:bg-cherry-600","active:border-cherry-600","disabled:text-cherry-300","disabled:border-cherry-300","focus:outline-cherry","focus:ring-cherry",d),f=n()("border-strawberry","hover:bg-strawberry","text-strawberry","active:bg-strawberry-600","active:border-strawberry-600","disabled:text-strawberry-300","disabled:border-strawberry-300","focus:outline-strawberry","focus:ring-strawberry",d),h=n()("border-red","hover:bg-red","text-red","active:bg-red-600","active:border-red-600","disabled:text-red-300","disabled:border-red-300","focus:outline-red",d),E=n()("border-green","hover:bg-green","text-green","active:bg-green-600","active:border-green-600","disabled:text-green-300","disabled:border-green-300","focus:outline-green",d),b=n()("border-mango","hover:bg-mango","text-mango","bg-notBlack","hover:text-notBlack"),y=n()("border-notBlack","hover:bg-notBlack","text-notBlack","focus:outline-notBlack","focus:ring-notBlack",d),v=n()("border-accent","text-accent","bg-foreground","hover:bg-accent","hover:text-text"),x=n()("bg-secondary","text-notWhite","dark:text-notBlack","hover:bg-secondary-600"),w=n()("bg-foreground","text-text","hover:bg-foreground-600","active:bg-foreground-700","disabled:bg-foreground-200"),N=n()("border-2","border-foreground","text-foreground","hover:bg-longan-200"),S=e=>n()("leading-none","align-middle","py-2","px-4","no-select",e.className,{[u]:"pill"===e.buttonStyle,[m]:"roundrect"===e.buttonStyle,[g]:"authn"===e.buttonStyle,[p]:"cherry"===e.color,[f]:"strawberry"===e.color,[b]:"mango"===e.color,[y]:"not-black"===e.color,[h]:"red"===e.color,[v]:"accent"===e.color,[E]:"green"===e.color,[x]:"secondary"===e.color,[w]:"authn-primary"===e.color,[N]:"authn-other"===e.color}),j=a.forwardRef((({buttonStyle:e,color:t,className:r,...l},n)=>{const o=S({buttonStyle:e,color:t,className:r,...l});return a.createElement("button",c({},l,{className:o,ref:n}),l.children)}));j.displayName="Button";const k=a.forwardRef((({buttonStyle:e,color:t,...r},l)=>{const n=S({buttonStyle:e,color:t,...r});return a.createElement("a",c({},r,{className:n,ref:l}),r.children)}));k.displayName="LinkButton"},20228:function(e,t,r){r.d(t,{Z:function(){return c}});var l=r(94159),n=r(70496),a=r(65443),o=r.n(a);const c=({bigLabel:e,smallLabel:t,inputElement:r,infoBoxLevel:a,infoBoxContent:c,customDescription:s,disabled:i})=>{const d=t?"row-span-1":"row-span-2",u=s??null;return l.createElement("div",{className:"grid grid-cols-[1fr_min-content] grid-rows-[min-content] items-center gap-2.5 pt-2.5"},l.createElement(l.Fragment,null,l.createElement("label",{htmlFor:r.props.id,className:o()("col-start-1 row-start-1 font-bold",d,{"text-gray-300":i})},e),t?l.createElement("label",{htmlFor:r.props.id,className:o()("col-start-1 row-start-2 align-middle",{"text-gray-300":i})},t):null,l.createElement("div",{className:"col-start-2 row-span-2 row-start-1"},r),a?l.createElement(n.v,{level:a,className:"col-span-2 col-start-1"},c):u,l.createElement("hr",{className:"col-span-2 col-start-1 w-full border-gray-300"})))}},453:function(e,t,r){r.r(t),r.d(t,{ActiveArtistAlleyListings:function(){return c}});var l=r(94159),n=r(26225),a=r(46975),o=r(12093);const c=({project:e,listings:t,userLookup:r})=>l.createElement(l.Fragment,null,l.createElement("h4",{className:"h4"},"artist alley listings"),l.createElement("div",{className:"flex flex-row flex-wrap gap-3"},t.map((t=>l.createElement("div",{className:"w-[300px] border border-notBlack p-3",key:t.id},l.createElement(n.l,{listing:t,project:e}),l.createElement(a.k,{as:"a",href:o.ZP.public.moderation.manageArtistAlleyListing({adId:t.id}),buttonSize:"regular",buttonColor:"stroke",extraClasses:"mt-3"},"manage listing"))))))},55892:function(e,t,r){r.r(t),r.d(t,{AddEditor:function(){return u}});var l=r(59605),n=r(94159),a=r(32956),o=r.n(a),c=r(99838),s=r(2735);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e},i.apply(this,arguments)}const d=(e,{isHighlighted:t})=>n.createElement("div",{key:`autocomplete-user-${e.userId}`},e.email," (user id ",e.userId,")"),u=({onSubmit:e})=>{const{register:t,handleSubmit:r,setValue:a}=(0,c.cI)(),[u,m]=(0,n.useState)(void 0),[g,p]=(0,n.useState)(""),{users:f,invalidate:h}=(0,l._q)(g),E=(0,n.useCallback)(((e,{newValue:t})=>{p(t)}),[p]),b=(0,n.useCallback)((({value:e})=>{h(e)}),[h]),y=(0,n.useCallback)((()=>{h("")}),[h]),v=(0,n.useCallback)(((e,{suggestion:t})=>{m(t),a("userId",t.userId)}),[m,a]);return n.createElement(n.Fragment,null,n.createElement("form",{className:"flex max-w-fit flex-col gap-2 rounded-lg border border-accent p-3",onSubmit:r(e)},n.createElement("h4",{className:"h4"},"add editors"),n.createElement("input",i({type:"hidden",value:"create"},t("action"))),n.createElement("p",null),u?n.createElement(n.Fragment,null,"selected user:",`${u.email} (user id ${u.userId})`,n.createElement(s.zx,{buttonStyle:"pill",color:"cherry",className:"w-1/4",onClick:()=>{m(void 0),a("userId",-1)}},"deselect")):n.createElement(n.Fragment,null,"search for the e-mail of an editor to add:",n.createElement(o(),{suggestions:f??[],getSuggestionValue:e=>e.email,inputProps:{onChange:E,value:g},onSuggestionsFetchRequested:b,onSuggestionsClearRequested:y,onSuggestionSelected:v,renderSuggestion:d,alwaysRenderSuggestions:!0})),n.createElement("p",null,"reason for adding editor:",n.createElement("textarea",t("reason",{required:!0}))),n.createElement(s.zx,{type:"submit",buttonStyle:"pill",color:"cherry",className:"w-fit"},"add editor")))}},23010:function(e,t,r){r.r(t),r.d(t,{EditProfileForm:function(){return i}});var l=r(71860),n=r(12093),a=r(94159),o=r(99838),c=r(2735);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e},s.apply(this,arguments)}const i=({project:e,selfUser:t})=>{const{register:r,handleSubmit:i,reset:d}=(0,o.cI)({defaultValues:{clearAvatar:!1,clearHeader:!1,dek:e.dek,description:e.description,displayName:e.displayName,pronouns:e.pronouns??"",url:e.url??""}}),u=l.S.moderation.project.updateProfile.useMutation();return a.createElement("form",{className:"prose rounded-lg border p-3",onSubmit:i((async t=>{await u.mutateAsync({projectId:e.projectId,...t}),window.location.reload()}))},a.createElement("table",null,a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",null,"handle"),a.createElement("td",null,e.handle," ",e.handleSuspicionResult?a.createElement("span",{className:e.handleSuspicionResult.score>.8?"text-red":""},"(suspicion score:"," ",(100*e.handleSuspicionResult.score).toLocaleString(void 0,{maximumFractionDigits:2}),"%)"):null)),a.createElement("tr",null,a.createElement("td",null,"display name"),a.createElement("td",null,a.createElement("input",s({type:"text"},r("displayName",{maxLength:70}))))),a.createElement("tr",null,a.createElement("td",null,"dek"),a.createElement("td",null,a.createElement("input",s({type:"text"},r("dek",{maxLength:35}))))),a.createElement("tr",null,a.createElement("td",null,"pronouns"),a.createElement("td",null,a.createElement("input",s({type:"text"},r("pronouns",{maxLength:35}))))),a.createElement("tr",null,a.createElement("td",null,"url"),a.createElement("td",null,a.createElement("input",s({type:"url"},r("url"))))),a.createElement("tr",null,a.createElement("td",null,"description"),a.createElement("td",null,a.createElement("textarea",s({className:"w-full max-w-prose"},r("description"))))),a.createElement("tr",null,a.createElement("td",null,"avatar"),a.createElement("td",null,a.createElement("a",{href:e.avatarURL,target:"_blank",rel:"noreferrer"},e.avatarURL),a.createElement("br",null),a.createElement("label",null,"remove? "),a.createElement("input",s({type:"checkbox"},r("clearAvatar"))))),a.createElement("tr",null,a.createElement("td",null,"header"),a.createElement("td",null,e.headerURL?a.createElement(a.Fragment,null,a.createElement("a",{href:e.headerURL,target:"_blank",rel:"noreferrer"},e.headerURL),a.createElement("br",null),a.createElement("label",null,"remove? "),a.createElement("input",s({type:"checkbox"},r("clearHeader")))):"none")),a.createElement("tr",null,a.createElement("td",null,"self user"),a.createElement("td",null,t?a.createElement("a",{href:n.ZP.public.moderation.manageUser({userId:t.userId}).toString()},t.email," (user id ",t.userId,")"):a.createElement(a.Fragment,null,"none"))),a.createElement("tr",null,a.createElement("td",null,"last activity time"),a.createElement("td",null,e.lastActivityTime??"null")),a.createElement("tr",null,a.createElement("td",null,"delete after time"),a.createElement("td",null,e.deleteAfter??"null")))),a.createElement(c.zx,{type:"submit",buttonStyle:"pill",color:"green"},"save changes"),a.createElement(c.zx,{type:"reset",buttonStyle:"pill",color:"red",onClick:e=>{e.preventDefault(),d(void 0,{keepDefaultValues:!0})}},"reset changes"))}},209:function(e,t,r){r.r(t),r.d(t,{EditProjectFlagsForm:function(){return m}});var l=r(94159),n=r(99838),a=r(71860),o=r(70769),c=r(97287),s=l.forwardRef((function({title:e,titleId:t,...r},n){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":t},r),e?l.createElement("title",{id:t},e):null,l.createElement("path",{fillRule:"evenodd",d:"M11.47 4.72a.75.75 0 011.06 0l3.75 3.75a.75.75 0 01-1.06 1.06L12 6.31 8.78 9.53a.75.75 0 01-1.06-1.06l3.75-3.75zm-3.75 9.75a.75.75 0 011.06 0L12 17.69l3.22-3.22a.75.75 0 111.06 1.06l-3.75 3.75a.75.75 0 01-1.06 0l-3.75-3.75a.75.75 0 010-1.06z",clipRule:"evenodd"}))})),i=l.forwardRef((function({title:e,titleId:t,...r},n){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":t},r),e?l.createElement("title",{id:t},e):null,l.createElement("path",{fillRule:"evenodd",d:"M19.916 4.626a.75.75 0 01.208 1.04l-9 13.5a.75.75 0 01-1.154.114l-6-6a.75.75 0 011.06-1.06l5.353 5.353 8.493-12.739a.75.75 0 011.04-.208z",clipRule:"evenodd"}))})),d=r(2735);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e},u.apply(this,arguments)}const m=({currentFlags:e,projectId:t})=>{const r=a.S.moderation.project.updateFlags.useMutation(),{register:m,handleSubmit:g,control:p,formState:f}=(0,n.cI)({defaultValues:{projectFlags:e,reason:""}});return l.createElement("form",{onSubmit:g((e=>r.mutateAsync({projectId:t,newFlags:e.projectFlags,reason:e.reason}))),className:"my-6 flex max-w-prose flex-col gap-4"},l.createElement("div",{className:"max-w-prose"},l.createElement("label",null,"flags"),l.createElement(n.Qr,{control:p,name:"projectFlags",render:({field:e})=>l.createElement(c.R,{multiple:!0,value:e.value,onChange:e.onChange},l.createElement("div",{className:"relative mt-1"},l.createElement(c.R.Button,{className:"relative w-full cursor-default rounded-lg bg-notWhite py-2 pl-3 pr-10 text-left shadow-md focus:outline-none focus-visible:border-cherry focus-visible:ring-2 focus-visible:ring-notWhite focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-mango-300"},l.createElement("span",{className:"block truncate"},e.value.join(", ")),l.createElement("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},l.createElement(s,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"}))),l.createElement(c.R.Options,{className:"absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-notWhite py-1 text-base shadow-lg ring-1 ring-notBlack ring-opacity-5 focus:outline-none"},o.Xw.options.map((e=>l.createElement(c.R.Option,{key:e,value:e,className:({active:e})=>"relative cursor-default select-none py-2 pl-10 pr-4 "+(e?"bg-cherry-100 text-cherry-900":"text-gray-900")},(({selected:t})=>l.createElement(l.Fragment,null," ",l.createElement("span",{className:"block truncate "+(t?"font-medium":"font-normal")},e),t?l.createElement("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-mango-600"},l.createElement(i,{className:"h-5 w-5","aria-hidden":"true"})):null))))))))})),l.createElement("div",{className:"flex flex-col gap-2"},l.createElement("label",null,"change reason"),f.errors.reason?l.createElement("span",{className:"font-bold text-red"},f.errors.reason.message):null,l.createElement("textarea",u({className:"w-full"},m("reason",{required:"You must provide a reason!"})))),l.createElement(d.zx,{type:"submit",buttonStyle:"pill",color:"cherry",className:"max-w-max"},"submit"),f.isSubmitSuccessful?l.createElement("span",{className:"font-bold text-green"},"Submit successful!"):null,null)}},73962:function(e,t,r){r.r(t),r.d(t,{ModFlags:function(){return c}});var l=r(71860),n=r(2735),a=r(94159),o=r(99838);const c=({project:e})=>{const{register:t,handleSubmit:r,setValue:c}=(0,o.cI)(),s=(e=>{const t=l.S.projects.modFlags.query.useQuery({projectHandle:e});return{isFetched:t.isFetched,projectId:t.data?.projectId,adultContent:t.data?.adultContent,adultContentOverride:t.data?.adultContentOverride}})(e.handle),i=l.S.projects.modFlags.mutate.useMutation(),d=t=>{try{const r={reason:t.reason,projectHandle:e.handle};switch(t.operation){case"clear-adult-content":r.adultContent=!1;break;case"set-adult-content":r.adultContent=!0;break;case"set-adult-content-override":r.adultContentOverride=!0;break;case"clear-adult-content-override":r.adultContentOverride=!1}i.mutate(r)}finally{location.reload()}},u=e=>{c("operation",e),r(d)};return a.createElement("div",{className:"max-w-fit gap-2 rounded-lg border border-accent p-3"},a.createElement("h4",{className:"h4"},"moderation flags"),s.isFetched?a.createElement("form",{className:"flex flex-col",onSubmit:r(d)},a.createElement("p",null,"adult content:"," ",s.adultContent?.toString()??"loading..."),a.createElement("p",null,"adult content override:"," ",s.adultContentOverride?.toString()??"loading..."),s.adultContent?a.createElement(n.zx,{buttonStyle:"pill",color:"cherry",onClick:()=>u("clear-adult-content"),className:"w-fit"},"set adult content flag to false"):a.createElement(n.zx,{buttonStyle:"pill",color:"cherry",onClick:()=>u("set-adult-content"),className:"w-fit"},"set adult content flag to true"),s.adultContentOverride?a.createElement(n.zx,{buttonStyle:"pill",color:"cherry",onClick:()=>u("clear-adult-content-override"),className:"w-fit"},"set adult content override to false"):a.createElement(n.zx,{buttonStyle:"pill",color:"cherry",onClick:()=>u("set-adult-content-override"),className:"w-fit"},"set adult content override to true"),a.createElement("p",null,"reason for making change:",a.createElement("textarea",t("reason",{required:!0})))):a.createElement(a.Fragment,null,"(loading current state)"))}},3152:function(e,t,r){r.r(t),r.d(t,{PurgeImmediatelyForm:function(){return i}});var l=r(94159),n=r(99838),a=r(2735),o=r(70496),c=r(71860);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e},s.apply(this,arguments)}const i=({project:e})=>{const{register:t,handleSubmit:r,watch:i}=(0,n.cI)(),d=i(),u=c.S.moderation.project.purge.useMutation();return l.createElement("form",{className:"flex max-w-fit flex-col gap-2 rounded-lg border border-accent p-3",onSubmit:r((async()=>{await u.mutateAsync({projectHandle:e.handle})}))},l.createElement("h4",{className:"h4"},"purge page immediately"),l.createElement(o.v,{level:"warning",className:"prose"},l.createElement("p",null,l.createElement("b",null,"HEADS UP!")," This will perform the following irreverseable operations ",l.createElement("b",null,"immediately"),":",l.createElement("ul",null,l.createElement("li",null,"hard-delete all of this page's posts without shares;"),l.createElement("li",null,"transfer all of this page's posts with shares to @deactivated and soft-delete them;"),l.createElement("li",null,"hard-delete all of this page's comments without replies;"),l.createElement("li",null,"transfer all of this page's comments with replies to @deactivated and soft-delete them;"),l.createElement("li",null,"hard-delete this page and its relationships."))),l.createElement("p",null,"Only use this form if you're doing it at user request, and only if a deferred deletion is inappropriate for the circumstances of the situation!")),l.createElement("label",null,"I've read the warnings and I'm still gonna do it:"),l.createElement("input",s({type:"checkbox"},t("confirmed",{required:!0}))),l.createElement(a.zx,{type:"submit",buttonStyle:"pill",color:"cherry",className:"w-fit",disabled:!d.confirmed},"purge page"))}},85473:function(e,t,r){r.r(t),r.d(t,{QueueForPurgeForm:function(){return d}});var l=r(94159),n=r(99838),a=r(2735),o=r(70496),c=r(71860),s=r(84879);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e},i.apply(this,arguments)}const d=({project:e})=>{const{register:t,handleSubmit:r,watch:d}=(0,n.cI)(),u=d(),m=c.S.moderation.project.queueForPurge.useMutation();return l.createElement("form",{className:"flex max-w-fit flex-col gap-2 rounded-lg border border-accent p-3",onSubmit:r((async()=>{await m.mutateAsync({projectId:e.projectId})}))},l.createElement("h4",{className:"h4"},"queue page for purge"),l.createElement(o.v,{level:"warning",className:"prose"},l.createElement("p",null,l.createElement("b",null,"HEADS UP!")," This will start a timer to perform the following irreverseable operations, at some time within 24 hours of ",s.ou.now().plus({days:3}).toString(),":",l.createElement("ul",null,l.createElement("li",null,"hard-delete all of this page's posts without shares;"),l.createElement("li",null,"transfer all of this page's posts with shares to @deactivated and soft-delete them;"),l.createElement("li",null,"hard-delete all of this page's comments without replies;"),l.createElement("li",null,"transfer all of this page's comments with replies to @deactivated and soft-delete them;"),l.createElement("li",null,"hard-delete this page and its relationships."))),l.createElement("p",null,"The editor(s) of this page will be able to cancel the queued deletion, if it was mistaken or they change their mind.")),l.createElement("label",null,"I've read the warnings and I'm still gonna do it:"),l.createElement("input",i({type:"checkbox"},t("confirmed",{required:!0}))),l.createElement(a.zx,{type:"submit",buttonStyle:"pill",color:"cherry",className:"w-fit",disabled:!u.confirmed},"queue page for purge"))}},51502:function(e,t,r){r.r(t),r.d(t,{ManagePage:function(){return j},default:function(){return k}});var l=r(71860),n=r(2735),a=r(12093),o=r(94159),c=r(99838),s=r(51028),i=r(70496),d=r(20228),u=r(48002),m=r(6553);function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e},g.apply(this,arguments)}const p=({project:e})=>{const{t:t}=(0,s.$G)(),{register:r,handleSubmit:n,formState:{errors:p}}=(0,c.cI)({defaultValues:{handle:e.handle},mode:"onBlur"}),f=l.S.projects.checkHandle.useMutation(),h=l.S.moderation.project.changeHandle.useMutation();return o.createElement("div",{className:"flex max-h-min w-full max-w-prose flex-col gap-4 rounded-lg border border-mango bg-notWhite px-7 py-8 text-notBlack"},o.createElement("form",{className:"flex flex-col gap-4",onSubmit:n((async t=>h.mutateAsync({newHandle:t.handle,projectId:e.projectId}).then((()=>location.replace(a.ZP.public.moderation.manageProject({projectHandle:t.handle}))))))},o.createElement("h4",{className:u.Kl},"change handle"),o.createElement(i.v,{level:"info"},o.createElement("div",{className:"prose prose-sm"},o.createElement("p",null,'Handles must be at least 3 characters long, only contain letters, numbers, and hyphens ("-"), and not already be in use.'))),o.createElement("div",{className:"flex flex-col"},o.createElement(d.Z,{bigLabel:"new handle",inputElement:o.createElement(o.Fragment,null,o.createElement("input",g({type:"text"},r("handle",{required:"Handle is required!",validate:async e=>{try{const t=await f.mutateAsync({handle:e});return!0===t.valid||t.reason}catch(e){return t("common:unknown-error").toString()}}}))),p.handle?o.createElement("p",{className:"text-red"},p.handle.message):null)})),o.createElement("div",{className:"flex w-full flex-row items-center justify-end gap-4 font-bold text-notWhite"},h.isSuccess?o.createElement("p",{className:"text-green"},"saved!"):null,h.isError?o.createElement("p",{className:"text-red"},h.error.message):null,o.createElement(m.p,{type:"submit",disabled:h.isLoading,className:"font-bold"},"change handle"))))};var f=r(55892),h=r(23010),E=r(209),b=r(73962),y=r(3152),v=r(453),x=r(85473);function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e},w.apply(this,arguments)}const N=({oldValue:e,newValue:t})=>e!==t?o.createElement("strong",null,e.toString()," → ",t.toString()):o.createElement(o.Fragment,null,e.toString()),S=({oldValue:e,newValue:t})=>e!==t?o.createElement(o.Fragment,null,JSON.stringify(e)," → ",JSON.stringify(t)):o.createElement(o.Fragment,null,JSON.stringify(e)),j=e=>{const{project:t,selfUser:r,editors:s,editorAuditLog:i,userLookup:d}=e,{register:u,handleSubmit:m}=(0,c.cI)(),g=l.S.moderation.project.addEditor.useMutation(),j=l.S.moderation.project.removeEditor.useMutation(),k=async e=>{const r={fromUserId:e.userId,toProjectId:t.projectId,reason:e.reason??""};try{"create"===e.action?await g.mutateAsync(r):await j.mutateAsync(r)}finally{window.location.reload()}};return o.createElement("div",{className:"cohost-shadow-light dark:cohost-shadow-dark container mx-auto mt-12 flex flex-col gap-4 rounded-lg bg-notWhite p-3 text-notBlack"},o.createElement("h1",{className:"text-4xl"},"manage page"),o.createElement(h.EditProfileForm,{project:t,selfUser:r}),o.createElement(p,{project:t}),o.createElement(b.ModFlags,e),o.createElement("h4",{className:"h4"},"moderation flag changes"),o.createElement("table",{className:"prose"},o.createElement("thead",null,o.createElement("tr",null,o.createElement("td",null,"adult content flag"),o.createElement("td",null,"adult content override"),o.createElement("td",null,"performed at"),o.createElement("td",null,"performed by user id (e-mail)"),o.createElement("td",null,"reason"))),o.createElement("tbody",null,e.modFlagAuditLog.map((e=>o.createElement("tr",{key:e.entryId},o.createElement("td",null,o.createElement(N,{oldValue:e.oldAdultContent,newValue:e.newAdultContent})),o.createElement("td",null,o.createElement(N,{oldValue:e.oldAdultContentOverride,newValue:e.newAdultContentOverride})),o.createElement("td",null,e.loggedAt),o.createElement("td",null,`${e.changedBy} (${d[e.changedBy.toString()].email})`),o.createElement("td",null,e.reason)))))),o.createElement("h4",{className:"h4"},"edit project flags"),o.createElement(E.EditProjectFlagsForm,{currentFlags:t.flags,projectId:t.projectId}),o.createElement("h4",{className:"h4"},"project flag changes"),o.createElement("table",{className:"prose"},o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",null,"flags"),o.createElement("th",null,"performed at"),o.createElement("th",null,"performed by user id (e-mail)"),o.createElement("th",null,"reason"))),o.createElement("tbody",null,e.projectFlagAuditLog.map((e=>o.createElement("tr",{key:e.entryId},o.createElement("td",null,o.createElement(S,{oldValue:e.oldFlags,newValue:e.newFlags})),o.createElement("td",null,e.loggedAt),o.createElement("td",null,`${e.changedBy} (${d[e.changedBy.toString()].email})`),o.createElement("td",null,e.reason)))))),o.createElement("h4",{className:"h4"},"current editors"),o.createElement("ul",null,s.map((e=>o.createElement("li",{key:e.userId},e.email," (user id ",e.userId,")"," ",o.createElement("a",{href:a.ZP.public.moderation.manageUser({userId:e.userId}).toString()},"(manage)"))))),o.createElement(f.AddEditor,{onSubmit:k}),o.createElement("form",{className:"flex max-w-fit flex-col gap-2 rounded-lg border border-accent p-3",onSubmit:m(k)},o.createElement("h4",{className:"h4"},"remove editors"),o.createElement("input",w({type:"hidden",value:"remove"},u("action"))),o.createElement("p",null,o.createElement("label",{htmlFor:"remove-userId"},"editor to remove:"),o.createElement("select",w({id:"remove-userId"},u("userId",{valueAsNumber:!0})),s.map((e=>o.createElement("option",{key:e.userId,value:e.userId},e.email," (user id ",e.userId,")"))))),o.createElement("p",null,"reason for removing editor:",o.createElement("textarea",u("reason",{required:!0}))),o.createElement(n.zx,{type:"submit",buttonStyle:"pill",color:"cherry",className:"w-fit"},"remove editor")),o.createElement("h4",{className:"h4"},"editorship changes"),o.createElement("table",{className:"prose"},o.createElement("thead",null,o.createElement("tr",null,o.createElement("td",null,"added/removed"),o.createElement("td",null,"user id (e-mail)"),o.createElement("td",null,"performed at"),o.createElement("td",null,"performed by user id (e-mail)"),o.createElement("td",null,"reason"))),o.createElement("tbody",null,i.map((e=>o.createElement("tr",{key:e.entryId},o.createElement("td",null,"add_editor"===e.logType?"added":"removed"),o.createElement("td",null,`${e.userId} (${d[e.userId.toString()].email})`),o.createElement("td",null,e.loggedAt),o.createElement("td",null,`${e.changedBy} (${d[e.changedBy.toString()].email})`),o.createElement("td",null,e.reason)))))),o.createElement(v.ActiveArtistAlleyListings,e),o.createElement(x.QueueForPurgeForm,e),o.createElement(y.PurgeImmediatelyForm,e))};j.displayName="moderation/manage-page";var k=j},48002:function(e,t,r){r.d(t,{Kl:function(){return n},dO:function(){return a},hY:function(){return l},nk:function(){return o}});const l="cohost-shadow-light dark:cohost-shadow-dark mx-auto flex max-h-min w-full flex-col gap-4 rounded-lg bg-notWhite text-notBlack px-7 py-8",n="font-atkinson font-bold text-4xl",a="flex w-full flex-row items-center justify-end gap-4 font-bold text-notWhite",o="font-atkinson font-bold text-2xl pt-8"}}]);
//# sourceMappingURL=client-preact-components-pages-moderation-manage-page.ee0ffc361470335fa7f0.js.map